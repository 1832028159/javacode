<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"
    "http://struts.apache.org/dtds/struts-2.1.7.dtd">
<struts>
	<!-- 控制文字编码 -->
	<constant name="struts.i18n.encoding" value="utf-8" />
	<!-- 文件最大上载文件，字节为单位，当前值为5M -->
	<constant name="struts.multipart.maxSize" value="5242880"/>
	<constant name="struts.ognl.allowStaticMethodAccess" value="true"/>
	<include file="struts_upload.xml" />
	<include file="struts-order.xml" />
	  <!-- <bean   type= "org.apache.struts2.dispatcher.multipart.MultiPartRequest"
      name= "myRequestParsers"   class= "com.sbd.web.dax.RequestParseWrapper" 
      scope= "default"/>-->
       <constant   name= "struts.multipart.handler"   value= "myRequestParsers"   />
    <package name="util" extends="struts-default" namespace="/util">	
     	<result-types>
		    <result-type name="ValidateImage" class="com.sbd.web.util.ImageResult" />
		</result-types>
		<!-- 全局错误跳转 -->
		<global-results>
			<result name="error" type="redirect">/page/error.jsp</result>
		</global-results>
    	<!-- 下载 -->
       <action name="download" class="com.sbd.web.action.DownloadAction" >
       	<result type="stream">
       		<param name="contentType">application/pdf</param>
       		<param name="inputName">downFile</param>
       		<param name="contentDisposition">attachment;filename="${fileName}"</param>
       		<param name="bufferSize">2048</param>
       	</result>
       </action>
		<action name="ValidateImage" class="com.sbd.web.util.ImageAction" method="doDefault">
		    <result name="image" type="ValidateImage"/>
		</action>
       </package>

	<package name="default" extends="struts-default">
		 <interceptors>
			<interceptor name="loginauth"
				class="kyle.baiqian.fs.web.interceptor.AuthorizationInterceptor">
			</interceptor>
			<!--拦截未登录用户-->
			<interceptor-stack name="AuthInterceptor">
			<interceptor-ref name="loginauth"></interceptor-ref>
				<interceptor-ref name="defaultStack"></interceptor-ref> 
			</interceptor-stack>
		</interceptors>
		<!-- 全局错误跳转 -->
		<global-results>
			<result name="error" type="redirect">/bkpage/error.jsp</result>
			<result name="login" type="redirect">/toIndex</result>
		</global-results>
		
		<!-- 登录-->
		<action name="login" class="com.sbd.web.action.UserinfoAction" method="login">		
		   	<result name="success" type="redirect">/bkpage/userInfo.jsp</result>
		</action>

	    <!-- 未出账明细查询 -->
    	<action name="queryNotAccountDetail" class="com.sbd.web.action.FinanceAction" method="queryNotAccountDetailReport">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/queryNotAccountDetail.jsp</result>
    		<result name="error">/bkpage/error.jsp</result>
    	</action>
    	<!-- 导出未出账明细Excel -->
    	<action name="importExcel" class="com.sbd.web.action.FinanceAction" method="importExcel">
    	 <interceptor-ref name="AuthInterceptor"></interceptor-ref>
    	</action>
    	<!-- 导出订单Excel -->
    	<action name="exportExcelForOreders" class="com.sbd.web.action.QueryOrderAction" method="exportExcelForOreders">
    		<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    	</action>
    	
	    <!-- 查询问题件 -->
    	<action name="queryIssue" class="com.sbd.web.action.IssueAction" method="queryIssueByParams">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success" type="dispatcher">/bkpage/queryIssue.jsp</result>
    	</action>
    	
    	<!-- 新增问题处理页面 -->
    	<action name="queryIssueById" class="com.sbd.web.action.IssueAction" method="queryIssueById">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success" type="dispatcher">/bkpage/issueReplay.jsp</result>
    	</action>
    	<!-- 新增问题处理-->
    	<action name="customerReplay" class="com.sbd.web.action.IssueAction" method="customerReplay">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success" type="redirect">/queryIssueAllReplay</result>
    	</action>
    	<!-- 查看问题件回复 -->
    	<action name="queryIssueAllReplay" class="com.sbd.web.action.IssueAction" method="queryIssueAllReplay">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success" type="dispatcher">/bkpage/queryReplay.jsp</result>
    	</action>
    	
    	<!-- 帐单查询 -->
    	<action name="queryBillRecord" class="com.sbd.web.action.FinanceAction" method="queryBillRecord">
    		<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/queryBillRecord.jsp</result>
    	</action>
    	
    	<!-- 帐单下载(excel) -->
    	<action name="downloadBillRecordForExcel" class="com.sbd.web.action.FinanceAction" method="downloadBillRecordForExcel">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref></action>
    	<!-- 帐单明细 -->
    	<action name="queryBillRecordForDetial" class="com.sbd.web.action.FinanceAction" method="queryBillRecordForDetial">
    		<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/billRecordDetail.jsp</result>
    	</action>
    	
    	<!-- 帐单下载(pdf) -->
    	<action name="downloadBillRecord" class="com.sbd.web.action.FinanceAction" method="downloadBillRecord">
    	
    		<result name="success" type="redirect">/util/download?fileName=${fileName}</result>
    	</action>
    	<!-- 根据主键查用户 -->
    	<action name="queryByOpId" class="com.sbd.web.action.UserinfoAction" method="queryByOpId">
    		<result name="success">/bkpage/userInfo.jsp</result>
    	</action>
    	
    	<!-- 修改密码 -->
    	<action name="modifyPassword" class="com.sbd.web.action.UserinfoAction" method="modifyPassword">
    		<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success" type="redirect">queryByOpId</result>
    	</action>
	    <!--根据类型查询公告-新闻中心 -->
	    <action name="newCode" class="com.sbd.web.action.BulletinAction" method="queryByBkCode">
			<result name="success">/news/newsCenter.jsp</result>
		</action>  
	    <!-- 根据公告编号查询-新闻详情-公告-->
	   <action name="qyByBlIdTool" class="com.sbd.web.action.BulletinAction" method="queryByBlId">
	   		<result name="success">/news/articlePage.jsp</result>
	   </action>
		 <!-- 后台查询公告 -->
	    <action name="queryBulletin" class="com.sbd.web.action.BulletinAction" method="queryBulletin">
			<result name="success">/bkpage/listBulletin.jsp</result>
		</action>  
		<!-- 根据公告编号查询 -->
		<action name="getBulletinByblId" class="com.sbd.web.action.BulletinAction" method="queryByBlId">
			<result name="success">/bkpage/modifyBulletin.jsp</result>
		</action> 
		<!-- 保存和修改公告 -->
		<action name="saveBulletin" class="com.sbd.web.action.BulletinAction" method="saveBulletin">
			<result name="success" type="redirect">/queryBulletin</result>
		</action> 
		<!-- 删除公告 -->
		<action name="deleteBulletin" class="com.sbd.web.action.BulletinAction" method="deleteBulletin">
			<result name="success" type="redirect">/queryBulletin</result>
		</action>
	
	   <!-- 航空公司查询 -->
    	<!--<action name="airwayCompanyQuery" class="com.sbd.web.action.BaseDataAccessAction" method="">
    	   <result name="success">/chaxu/airwayCompangQuery.jsp</result>
    	</action> -->
	       
	  <!-- 全球机场查询
    	 <action name="airportQuery" class="com.sbd.web.action.BaseDataAccessAction" method="worldAccess">    		
    		<result name="success">/chaxu/airportQuery.jsp</result>    		
    	</action>-->
	
	   <!-- 港口查询
    	<action name="portQuery" class="com.sbd.web.action.BaseDataAccessAction" method="">
    	   <result name="success">/chaxu/portQuery.jsp</result>
    	</action>-->
	
	   <!-- 偏远地区查询
		<action name="remoteQuery" class="com.sbd.web.action.BaseDataAccessAction" method="remoteDistrictAccess">
			<result name="success" >/chaxu/remoteQuery.jsp</result>
		</action>
	   <action name="getCountryCodeByHubCode" class="com.sbd.web.action.BaseDataAccessAction" method="getCountryCodeByHubCode"></action>
    	<action name="getHubCodeByCountryName" class="com.sbd.web.action.BaseDataAccessAction" method="getHubCodeByCountryName"></action>
-->
		<!-- 初始化首页 -->
		<action name="toIndex" class="com.sbd.web.action.BulletinAction" method="initIndex">
			<result name="success">/introduction/index.jsp</result>
		</action>
		
		<!--前台轨迹查询 -->
	    <action name="queryTrackNew" class="com.sbd.web.action.WaybillTrackAction" method="queryTrack">
	    	<result name="success" >/bkpage/queryTrackNew.jsp</result>
	    </action>
  
  		<!--后台轨迹查询 -->
	    <action name="bkQueryTrackNew" class="com.sbd.web.action.WaybillTrackAction" method="queryTrack">
	    	<result name="success" >/bkpage/queryTrack.jsp</result>
	    </action>
  
	     <!--是否有轨迹信息-->
	    <action name="trackAjax" class="com.sbd.web.action.WaybillTrackAction" method="trackAjax">
	    </action> 
	    <!-- 根据Id查公告 -->
	    <action name="getBulletinById" class="com.sbd.web.action.BulletinAction" method="queryByBlId">
			<result name="success">/page/detailNews.jsp</result>
		</action>
		   	<!-- 查询发件人信息 -->
    	<action name="queryShipperInfo" class="com.sbd.web.action.UserAction" method="queryShipperInfo">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/queryShipperInfo.jsp</result>
    	</action> 
    	<action name="loadShipperInfo" class="com.sbd.web.action.UserAction" method="loadShipperInfo">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/shipperInfo.jsp</result>
    	</action>  
    	<!-- 保存发件人信息 -->
    	<action name="saveShipperInfo" class="com.sbd.web.action.UserAction" method="saveShipperInfo"> 
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success" type="chain">queryShipperInfo</result>
    	</action>    	
    	<!-- 后台费用试算 -->
    	<action name="costBudgetSbd" class="com.sbd.web.action.FeeActionBqc" method="costBudget">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/costBudgetHt.jsp</result>
    	</action>
    	<!-- 首页费用试算 -->
    	<action name="costBudget" class="com.sbd.web.action.FeeActionBqc" method="indexCostBudget">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/costBudget.jsp</result>
    	</action>
    	<!-- 往来账单 -->
    	<action name="queryCompanyBalance" class="com.sbd.web.action.FinanceAction" method="queryCompanyBalance">
    	<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/queryBalance.jsp</result>
    		<result name="error">/bkpage/error.jsp</result>
    	</action>
    	 <!-- 后台用户注册 -->
    	<action name="saveOneUser" class="com.sbd.web.action.CustomerAction" method="saveUser">
    		<result name="success">/bkpage/success.jsp</result>
    		<result name="input">/bkpage/register1.jsp</result>
    	</action>
    	<!-- 用户注册 和用户信息更改-->
    	<action name="saveUser" class="com.sbd.web.action.UserAction" method="save">
    		<result name="success">/bkpage/userInfo.jsp</result>
    		<result name="input">/bkpage/userReg.jsp</result>
    	</action>
    	<!-- 帐单查询 -->
    	<action name="queryBillRecordNew" class="com.sbd.web.action.FinanceAction" method="queryBillRecord">
    		<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/queryBillRecord.jsp</result>
    	</action>
    	
    	 <!-- 往来账查询OTHER -->
    	<action name="selectBalance" class="com.sbd.web.action.FinanceAction" method="selectBalance">
    		<interceptor-ref name="AuthInterceptor"></interceptor-ref>
    		<result name="success">/bkpage/queryBalance.jsp</result>
    	</action>
    	<!-- 根据主键查用户 -->
    	<action name="queryByOpId" class="com.sbd.web.action.UserAction" method="queryByOpId">
    		<result name="success">/bkpage/userInfo.jsp</result>
    	</action>
	      <!-- 初始化货物类型下拉列表 -->
        <action name="getAllCargoTypes" class="com.sbd.web.action.DoCargoTypeAction" method="getAllCargoTypes" />
            
         <!-- 初始化付费模式下拉列表 -->
        <action name="getAllPaymentmodes" class="com.sbd.web.action.DoPaymentmodeAction" method="getAllPaymentmodes" />
	     <!-- 显示上传图片名称和上传时间 -->
	    <action name="showImage" class="com.sbd.web.action.ShowImageAction" method="showImage" >
	        <result name="success">/upload/Image.jsp</result>
	    </action>

	     <action name="queryPrinter" class="com.sbd.web.action.PrinterAction" method="queryPrinter">
			 <result name="dgm">/page/dgm.jsp</result>
			 <result name="success">/page/printLabelOrder.jsp</result>
	    </action>


		<action name="queryPrinterBill" class="com.sbd.web.action.PrinterAction" method="reportPrint">
			<result name="success">/bkpage/printBill.jsp</result>
		</action>


		<action name="printAll" class="com.sbd.web.action.PrinterAction" method="printAll">
			<result name="success" type="redirect">/order//queryPrintedOrders?link=printed</result>
		</action>



	 </package>
</struts>
